<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>Piano</title>
</head>
<body>

    <div id="content" class="row">
        <div class="col-sm-12  col-xs-12">
            <div class="piano">
                <img class="piano" src="img/piano.png"/>
                <p>
                <span class="pianovalue" id="value">value</span><br>
            </div>
        </div>
    </div>

    <script>
    
    var scale=[261,293,329,349,392,440,493,523];
    var buzzer;
        setup();
        function setup(){
            if(cpf){
                cpf.setPinMode('["resetPin"],["setPinMode","analog",0,"INPUT"]');
                cpf.setPinMode('["resetPin"],["setPinMode","digital", 6, "OUTPUT"]');
                cpf.setPinMode('["resetPin"],["setPinMode","digital",6,"TONE"]');
                //261-Do
                //293-Re
                //329-Mi
                //349-Fa
                //392-So
                //440-La
                //493-Si
                //523-Do
            }
        }

    function loop(){
        if(cpf){
            cpf.requst('["tone_play",6,261,300],["sleep",300]');
            cpf.requst('["tone_play",6,293,300],["sleep",300]');
            cpf.requst('["tone_play",6,329,300],["sleep",300]');
            cpf.requst('["tone_play",6,349,300],["sleep",300]');
            cpf.requst('["tone_play",6,392,300],["sleep",300]');
            cpf.requst('["tone_play",6,440,300],["sleep",300]');
            cpf.requst('["tone_play",6,493,300],["sleep",300]');
            cpf.requst('["tone_play",6,523,300],["sleep",300]');
        }
        setTimeout(loop,1000);
    }
    loop();

/*
int speakerPin = 2;
// 依照簡譜的順序，填入代表的音符，空白代表休止符
char notes[] = "ccggaagffeeddc ";
// 決定每個音階的拍子，注意這邊用 unsigned long 所以拍子只能是正整數
unsigned long beats[] = {1,1,1,1,1,1,2,1,1,1,1,1,1,2,4}; 
// 利用 sizeof()，算出總共要多少音符
int length = sizeof(notes); 
// 決定一拍多長，這邊一拍 300 ms
int tempo = 300;

void setup() {
  pinMode(speakerPin, OUTPUT);
}
void loop() {
  // 利用 for 來播放我們設定的歌曲，一個音一個音撥放
  for (int i = 0; i < length; i++) {
 // 如果是空白的話，不撥放音樂
    if (notes[i] == ' ') {
      delay(beats[i] * tempo); // rest
    } else {
  // 呼叫 palyNote() 這個 function，將音符轉換成訊號讓蜂鳴器發聲
      playNote(speakerPin,notes[i], beats[i] * tempo);
    } 
    // 每個音符之間的間隔，這邊設定的長短會有連音 or 段音的效果
    delay(tempo/10); 
  }
}

void playNote(int OutputPin, char note, unsigned long duration) {
   // 音符字元與對應的頻率由兩個矩陣表示
  char names[] = { 'c', 'd', 'e', 'f', 'g', 'a', 'b', 'C' };
  int tones[] = { 261, 294, 330, 349, 392, 440, 494, 523 };
  // 播放音符對應的頻率
  for (int i = 0; i < 8; i++) {
    if (names[i] == note) {
      tone(OutputPin,tones[i], duration);
  //下方的 delay() 及 noTone ()，測試過後一定要有這兩行，整體的撥放出來的東西才不會亂掉，可能是因為 Arduino 送出tone () 頻率後會馬上接著執行下個指令，不會等聲音播完，導致撥出的聲音混合而亂掉
      delay(duration);
      noTone(OutputPin);
    }
  }
}

*/


    </script>
</body>
</html>