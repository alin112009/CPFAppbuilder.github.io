<!DOCTYPE html>
<html>
    <head>
        <meta chartset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>光感測器</title>
        <style>
        body{
            background-color: 
            rgb(255, 255, 255);
        }
        h1{ color:navy;
            text-align: center;
        }
        p{
            color:navy;
            text-align: center;
        }
        </style>
    </head>
    <body>

        <h1>光感測器</h1>
        <div id="content" class="row">
            <div class="col-sm-12  col-xs-12">
                <div id="analog" class="col-sm-6 col-xs-12">
                    <div class="analogclass">
                        <img class="analogsensor" src="img/light.png" style="display: block;margin: auto;"/>
                         <span class="analogvalue" id="lightvalue">value</span><br>
                    </div>
                    <p>
                </div>
            </div>
        </div>

    <script>

            cpf.setPinMode('["resetPin"],["setPinMode","analog",0,"INPUT"]');
            cpf.get("a0");

            cpf.setPinMode('["resetPin"],["setPinMode","digital",7,"INPUT"]');
            cpf.get("d7");

            cpf.setPinMode('["resetPin"],["setPinMode", "digital", 7, "OUTPUT"]');
            cpf.request('["digitalWrite", 7 , 0]'); // turn off
            cpf.request('["digitalWrite", 7 , 1]'); // turn on


            cpf.setPinMode('["resetPin"],["grove_newChainableLED",7,8,1]');
            //cpf.requst('["grove_setColorRGB",0,255,255,255]');

            /*var light=cpf.get("a0");
            if(light<500){
                var r=cpf.get("rgb led","r");
                var g=cpf.get("rgb led","g");
                var b=cpf.get("rgb led","b");
            }else{
                cpf.set("rgb led",0,0,0);
            }
            cpf.repeat();*/

    var light;
	setup();
	// Analog
	function loop() {
		if(cpf){
            light = cpf.get("a0");
            document.getElementById("lightvalue").innerHTML = light;
            console.log(light);
        }	
            if(light<500){
                document.getElementById("lightvalue").innerHTML ="開";
                cpf.request('["digitalWrite", 7 , 1]');
            }else{
                document.getElementById("lightvalue").innerHTML ="關";
                cpf.request('["digitalWrite", 7 , 0]');
            }
		setTimeout(loop, 1000);
	}
	loop();
	
</script>
</body>
</html>