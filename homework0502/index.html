<!DOCTYPE html>
<html>
    <head>
        <meta chartset="utf-8">
        <title>光感測器</title>
        <style>
        body{
            background-color: 
            rgb(224, 240, 247);
        }
        h1{ color:navy;
            text-align: center;
        }
        p{
            color:navy;
            text-align: center;
        }
        </style>
    </head>
    <body>

        <h1>光感測器</h1>
        <div id="content" class="row">
            <div class="col-sm-12  col-xs-12">
                <div id="analog" class="col-sm-6 col-xs-12">
                    <div class="analogclass">
                        <img class="analogsensor" src="img/light.png" style="display:block; margin:auto";/>
                        <span class="analogvalue" id="lishtvalue">none</span><br>
                    </div>
                    <p>
                    <div class="analogclass">
                        <img class="analogrgbled" src="img/led.png" style="display:block;margin:auto";/>
                        <span class="rgbledvalue" id="rgbledvalue"></span><br>
                    </div>
                </div>
            <div id="rgb" class="col-sm-6 sol-xs-12">
                <table style="margin: 0 auto;margin-top:10px;">
                <tr style="text-align: center;">
                    <td><font color="red"><b>Red</b></font></td>
                    <td><font color="green"><b>green</b></font></td>
                    <td><font color="blue"><b>Blue</b></font></td>
                </tr>
                <tr style="text-align:center;">
                    <td id="redvalue">0</td>
                    <td id="greenvalue">0</td>
                    <td id="bluevalue">0</td>
                </tr>
                <tr>
                        <td><input Onchange="changeColor();" type="range" id="rled" class="ledbar" value="0" min="0" max="255"></td>
                        <td><input Onchange="changeColor();" type="range" id="gled" class="ledbar" value="0" min="0" max="255"></td>
                        <td><input Onchange="changeColor();" type="range" id="bled" class="ledbar" value="0" min="0" max="255"></td>
                </tr>
                </tr>
                </table>

            </div>
            </div>
        </div>



        
        <p>光感應元件</p>
        <p>RGB LED燈元件</p>
        <p>R:</p>
        <p>G:</p>
        <p>B:</p>

       <script>
            //cpf.setPinMode('["resetPin"],["setPinMode","analog",0,"INPUT"]');
            //cpf.get("a0");

            

            //cpf.setPinMode('["resetPin"],["setPinMode","digital",3,"INPUT"]');
            //cpf.get("d3");

            //cpf.setPinMode('["resetPin"],["grove_newChainableLED",7,8,1]');
            //cpf.requst('["grove_setColorRGB",0,255,255,255]');

            //var value=cpf.get("light sensor");
            //if(value<500){
            //    var r=cpf.get("rgb led","r");
            //    var g=cpf.get("rgb led","g");
            //    var b=cpf.get("rgb led","b");
            //}else{
            //    cpf.set("rgb led",0,0,0);
            //}
            //cpf.repeat();





var lightdata;
	var tempdata;
	var celsius;
	setup();
	// Analog
	function loop() {
		if(cpf){
	
			lightdata = cpf.get("light sensor");
			document.getElementById("lightvalue").innerHTML = lightdata;	
		}
		setTimeout(loop, 1000);
	}
	loop();
	
	// RGB
	function changeColor() {
		var Rled = document.getElementById("rled").value;
		var Gled = document.getElementById("gled").value;
		var Bled = document.getElementById("bled").value;
		
		document.getElementById("redvalue").innerHTML = Rled;
		document.getElementById("greenvalue").innerHTML = Gled;
		document.getElementById("bluevalue").innerHTML = Bled;
		
		document.getElementById("showcolor").style.backgroundColor = 'rgb(' + Rled + ',' + Gled + ',' + Bled + ')';
		
		if(cpf){
			cpf.setChainableLed("0," + Rled + "," + Gled + "," + Bled + ";");
		}
		
	}
	
	// cpf setup
	function setup(){
		if(cpf)
			cpf.setPinMode('["resetPin"],["setPinMode", "analog", 0, "INPUT"],["setPinMode", "analog", 1,"INPUT"],["grove_newChainableLED", 7, 8, 1]'); 
			//document.getElementById("demo").innerHTML += ret + "<br>";
	}
        </script>

    </body>
</html>